<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Discoveries Monument | Eat & Travel</title>
    <link rel="stylesheet" href="stylesheets/example.css" />
    <link rel="stylesheet" href="stylesheets/discoveries_monument.css" />
    <link rel="stylesheet" href="stylesheets/discoveries_monument_animation.css" />
</head>
<body>
  
  <!-- Site Overlay -->
  <div class="site-overlay"></div>
    
  <div class="container">
    
    <div id="top_layer" class="scroll">
      <div id="intro_title">
        <h1>Discoveries Monument</h1>
      </div>
      <div id="instructions">
        <p><span id="arrow">&raquo;</span></p> 
      </div>
        
      <div id="first_frame">
        <ol id="people_walking_frame_list" class="frame-list">
          <li class="active"></li>
        </ol>
      </div>
        
      <div id="second_frame" class="tile_numbers">
        <div class="blackdrop" style="height:80%;">
          <p>
            The Discoveries Monument was built in 1960 to commemorate the 500th anniversary of the death of Prince Henry the Navigator.  
          </p>
        </div>
      </div>
      
      <div id="fourth_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6465.jpg" alt="web_IMG_6465" height="768">
      </div>
        
        
      <div id="sixth_frame">
        <ol id="river_boat_pan_frame_list" class="frame-list">
          <li class="active"></li>
        </ol>
      </div>  
      
      <div id="ninth_frame" class="tile_starbursts">
        <div class="blackdrop" style="height:80%">
        <p>
          Among the historical figures represented in this sculpture of a ship are King Manuel I, poet Camoes, Vasco da Gama, Magellan, Cabral, and Prince Henry the Navigator at the prow.
        </p>
        </div>
      </div>
        
      <div id="conclusion" class="blackdrop">
        <p>See the next landmark.</p>
      </div>
    </div>
    
      
    <div id="middle_layer" class="scroll">
      <div id="third_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6484.jpg" alt="web_IMG_6484" height="768">
      </div>
      
      <div id="eighth_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6443.jpg" alt="web_IMG_6443" height="768">
      </div>
      

    </div>


    <div id="back_layer" class="scroll">
      
      <div id="fifth_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6477.jpg" alt="web_IMG_6477" height="768">
      </div>      
      
      <div id="fifth_text_frame" class="tile_swirls">
        <div class="blackdrop" style="height: 80%;">
        <p>
            There is a mosaic on the pavement in front of the monument of a compass and world map showing the routes taken by Portuguese explorers.
        </p>
        </div>
      </div>
      
      <div id="seventh_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6446.jpg" alt="web_IMG_6446" height="768">
      </div>
      
      <div id="tenth_frame">
        <img src="http://192.168.10.132/~admin/images/discoveries_monument/web_IMG_6433.jpg" alt="web_IMG_6433" height="768">
      </div>
      
    </div>
  
  </div>
    
  <script type="text/javascript" src="javascripts/vendor/jquery.js"></script>
  <script type="text/javascript" src="javascripts/vendor/modernizr-2.6.2.min.js"></script>
  <script type="text/javascript" src="javascripts/vendor/jquery.jInvertScroll.js"></script>
  <script type="text/javascript">
    (function($) {
      
      var frame_count = 119;
      function create_frames(id)
      {
        var frameList = $(id);
        console.log(frameList);
        for(var i = 0; i < frame_count; i++) { // the first <li> is already on the page
            var li = $('<li/>')
                .appendTo(frameList);
        }
      }
      
      create_frames('#people_walking_frame_list');
      create_frames('#river_boat_pan_frame_list');
      
      var $win = $(window),
        $firstFrameAnimations = $('#people_walking_frame_list li'),
        $sixthFrameAnimations = $('#river_boat_pan_frame_list li'),
        isFirefox = navigator.userAgent.match(/Firefox/) !== null;
      
        var animationHandler = function() {
  
          // quick fix to disable turn animation in Firefox
          if ( isFirefox == false) {
              frameHandler();
          }
        };

        $(document).scroll(animationHandler);
        $win.resize(animationHandler);
        
      function frameHandler(percent) {
        var w = percent * 1000;
        var firstFrameAnimationStart = 0,
          firstFrameAnimationEnd = 147,
          sixthFrameAnimationStart = 450,
          sixthFrameAnimationStop = 742;
        
        // hide the intro title
        $('#intro_title').css('opacity', 100 - (percent * 200));
        
        // #people_walking_frame_list starts at 0
        // #river_boat_frame_list starts at 
        var speed = 1.8;
        var v = w / speed;
        var choice = Math.ceil(v) - (Math.floor(Math.ceil(v)/frame_count)) * frame_count;
        
        if ((w > firstFrameAnimationStart) && (w < firstFrameAnimationEnd)) {
        console.log(w);
          if (choice >= 0 && choice < frame_count) {
              var nextFrame = choice;
              $firstFrameAnimations
                  .removeClass('active')
                  .eq(nextFrame).addClass('active');
          }
        } else if ((w > sixthFrameAnimationStart)&&(w < sixthFrameAnimationStop)) {
          if (choice >= 0 && choice < frame_count) {
              var nextFrame = choice;
              $sixthFrameAnimations
                  .removeClass('active')
                  .eq(nextFrame).addClass('active');
          }
          
        }
      }
      
      function scrollHandler(percentScroll){
        var w = percentScroll * 1000; // times 1000 so that we can get it to a fine grained scroll, less is choppy
        var v = w / 14.01;
        var countOfFrames = 6;
        var choice = Math.ceil(v) - (Math.floor(Math.ceil(v)/countOfFrames)) * countOfFrames;
        console.log(choice);
        if (choice == 0){
          make_base();
        } else {
        }
        
      }
      $.jInvertScroll(['.scroll','.menu-btn'],        // an array containing the selector(s) for the elements you want to animate
          {
          height: 6000,                   // optional: define the height the user can scroll, otherwise the overall length will be taken as scrollable height
          onScroll: frameHandler
      });
      $('.menu-btn').css('position','fixed'); // this needs to be applied after scrolling is applied, otherwise the btn races to the right
    }(jQuery));
  </script>
</body>
</html>

